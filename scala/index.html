



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://torre.me.uk/docs/scala/">
      
      
        <meta name="author" content="sentenza">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.6">
    
    
      
        <title>Scala - Sentenza's notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#757575">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Fira+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="grey" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#scala" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://torre.me.uk/docs" title="Sentenza's notes" class="md-header-nav__button md-logo">
          
            <i class="md-icon">library_books</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Sentenza's notes
              </span>
              <span class="md-header-nav__topic">
                Scala
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/sentenza/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      sentenza/docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://torre.me.uk/docs" title="Sentenza's notes" class="md-nav__button md-logo">
      
        <i class="md-icon">library_books</i>
      
    </a>
    Sentenza's notes
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/sentenza/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      sentenza/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Scala
      </label>
    
    <a href="./" title="Scala" class="md-nav__link md-nav__link--active">
      Scala
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#evaluation-rules" title="Evaluation rules" class="md-nav__link">
    Evaluation rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-parameters" title="Type Parameters" class="md-nav__link">
    Type Parameters
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variance" title="Variance" class="md-nav__link">
    Variance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects-and-code-organization" title="Objects and Code organization" class="md-nav__link">
    Objects and Code organization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-object-hierarchy" title="General object hierarchy" class="md-nav__link">
    General object hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factory-object" title="Factory Object" class="md-nav__link">
    Factory Object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factory-method" title="Factory method" class="md-nav__link">
    Factory method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collections" title="Collections" class="md-nav__link">
    Collections
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-classes" title="Base Classes" class="md-nav__link">
    Base Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immutable-collections" title="Immutable Collections" class="md-nav__link">
    Immutable Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutable-collections" title="Mutable Collections" class="md-nav__link">
    Mutable Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collections-snippet" title="Collections snippet" class="md-nav__link">
    Collections snippet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairs-similar-for-larger-tuples" title="Pairs (similar for larger Tuples)" class="md-nav__link">
    Pairs (similar for larger Tuples)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordering" title="Ordering" class="md-nav__link">
    Ordering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-and-flatmap" title="map() and flatMap()" class="md-nav__link">
    map() and flatMap()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#category-theory" title="Category Theory" class="md-nav__link">
    Category Theory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#algrebraic-data-type" title="Algrebraic Data Type" class="md-nav__link">
    Algrebraic Data Type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typeclass" title="Typeclass" class="md-nav__link">
    Typeclass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monoid" title="Monoid" class="md-nav__link">
    Monoid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fold-foldright-and-foldleft" title="fold: foldRight() and foldLeft()" class="md-nav__link">
    fold: foldRight() and foldLeft()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../links/" title="Links" class="md-nav__link">
      Links
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#evaluation-rules" title="Evaluation rules" class="md-nav__link">
    Evaluation rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-parameters" title="Type Parameters" class="md-nav__link">
    Type Parameters
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variance" title="Variance" class="md-nav__link">
    Variance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects-and-code-organization" title="Objects and Code organization" class="md-nav__link">
    Objects and Code organization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-object-hierarchy" title="General object hierarchy" class="md-nav__link">
    General object hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factory-object" title="Factory Object" class="md-nav__link">
    Factory Object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factory-method" title="Factory method" class="md-nav__link">
    Factory method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collections" title="Collections" class="md-nav__link">
    Collections
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-classes" title="Base Classes" class="md-nav__link">
    Base Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immutable-collections" title="Immutable Collections" class="md-nav__link">
    Immutable Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutable-collections" title="Mutable Collections" class="md-nav__link">
    Mutable Collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collections-snippet" title="Collections snippet" class="md-nav__link">
    Collections snippet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairs-similar-for-larger-tuples" title="Pairs (similar for larger Tuples)" class="md-nav__link">
    Pairs (similar for larger Tuples)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordering" title="Ordering" class="md-nav__link">
    Ordering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map-and-flatmap" title="map() and flatMap()" class="md-nav__link">
    map() and flatMap()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#category-theory" title="Category Theory" class="md-nav__link">
    Category Theory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#algrebraic-data-type" title="Algrebraic Data Type" class="md-nav__link">
    Algrebraic Data Type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typeclass" title="Typeclass" class="md-nav__link">
    Typeclass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monoid" title="Monoid" class="md-nav__link">
    Monoid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fold-foldright-and-foldleft" title="fold: foldRight() and foldLeft()" class="md-nav__link">
    fold: foldRight() and foldLeft()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/sentenza/docs/edit/master/docs/scala.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="scala">Scala</h1>
<h2 id="evaluation-rules">Evaluation rules</h2>
<ul>
<li><code class="codehilite">def</code> defines a method</li>
<li><code class="codehilite">val</code> defines a fixed value, it is immmutable and eagerly initialized</li>
<li><code class="codehilite">var</code> defines a variable reference, it is mutable and it should be avoided</li>
<li><code class="codehilite">lazy</code> only initialised when required and as late as possible (deferred evaluation), default is strict and is not recomputed like by-name parameters</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="n">myFunction</span> <span class="k">=</span> <span class="mi">2</span>         <span class="c1">// evaluated when called</span>
<span class="k">val</span> <span class="n">myImmutableValue</span> <span class="k">=</span> <span class="mi">2</span>   <span class="c1">// evaluated immediately</span>
<span class="k">lazy</span> <span class="k">val</span> <span class="n">iMLazy</span> <span class="k">=</span> <span class="mi">2</span>        <span class="c1">// evaluated once when needed</span>

<span class="k">def</span> <span class="n">sort</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Double</span><span class="o">])</span>       <span class="c1">// call by value</span>
<span class="k">def</span> <span class="n">sort</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">List</span><span class="o">[</span><span class="kt">Double</span><span class="o">])</span>    <span class="c1">// call by name</span>
<span class="c1">// ds is a sequence of Double, containing a varying number of arguments</span>
<span class="k">def</span> <span class="n">varargsFunction</span><span class="o">(</span><span class="n">ds</span><span class="k">:</span> <span class="kt">Double*</span><span class="o">)</span> <span class="k">=</span> <span class="o">???</span>
</pre></div>
</td></tr></table>

<ul>
<li><strong>Call by-value</strong>: evaluates the function arguments before calling the function</li>
<li><strong>Call by-name</strong>: evaluates the function first, and then evaluates the arguments if need be (each time the parameter is referenced inside the function)</li>
</ul>
<h2 id="type-parameters">Type Parameters</h2>
<p>Conceptually similar to C++ templates or Java generics. These can apply to classes, traits or functions.</p>
<p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">TypedClass</span><span class="o">[</span><span class="kt">F</span><span class="o">](</span><span class="n">arg1</span><span class="k">:</span> <span class="kt">F</span><span class="o">)</span> <span class="o">{</span> <span class="o">???</span> <span class="o">}</span>  
<span class="k">new</span> <span class="nc">TypedClass</span><span class="o">[</span><span class="kt">Int</span><span class="o">](</span><span class="mi">1</span><span class="o">)</span>  
<span class="k">new</span> <span class="nc">TypedClass</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>   <span class="c1">// the type is being inferred, i.e. determined based on the value arguments  </span>
</pre></div>
</td></tr></table>
Conventionally, the type parameters are expressed using uppercase letters (e.g. <em>A, B, T, F</em>). It's also possible to restrict the type being used, e.g.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="n">func</span><span class="o">[</span><span class="kt">T</span> <span class="k">&lt;:</span> <span class="kt">TopLevel</span><span class="o">](</span><span class="n">arg</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// T must derive from TopLevel or be TopLevel</span>
<span class="k">def</span> <span class="n">func</span><span class="o">[</span><span class="kt">T</span> <span class="k">&gt;:</span> <span class="kt">Level1</span><span class="o">](</span><span class="n">arg</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>   <span class="c1">// T must be a supertype of Level1</span>
<span class="k">def</span> <span class="n">func</span><span class="o">[</span><span class="kt">T</span> <span class="k">&gt;:</span> <span class="kt">Level1</span> <span class="k">&lt;:</span> <span class="kt">Top</span> <span class="kt">Level</span><span class="o">](</span><span class="n">arg</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</pre></div>
</td></tr></table>

<h3 id="variance">Variance</h3>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>Variance being a tricky business, <strong>users usually get it wrong</strong>, and they come away thinking that wildcard and generics
are overly complicated. With definition-side variance, you express your intent to the compiler, and the compiler will
double check that the methods you want available will indeed be available.</p>
<p>- <a href="https://www.artima.com/shop/programming_in_scala">Programming in Scala</a></p>
</div>
<p><strong>Upper Bounds:</strong>
<code class="codehilite">[S &lt;: T]</code> means: S is a subtype of T. Let's suppose that T is actually an <code class="codehilite">Iterable</code>, then S could one of <code class="codehilite">Seq</code>, <code class="codehilite">List</code> or <code class="codehilite">Iterable</code>.</p>
<p><strong>Lower Bounds:</strong>
<code class="codehilite">[S &gt;: T]</code> means: S is a supertype of T, or T is a subtype of S. So, if T is a <code class="codehilite">List</code>, S could be one of <code class="codehilite">List</code>, <code class="codehilite">Seq</code>, <code class="codehilite">Iterable</code>, or <code class="codehilite">AnyRef</code>.</p>
<p><strong>Mixed Bounds:</strong>
<code class="codehilite">[S &gt;: T2 &lt;: T1]</code> means: s is any type on interval between T1 and T2. In this case we have basically a mix of the two cases above.</p>
<p>Let's consider <code class="codehilite">NonEmpty &lt;: IntSet</code>, then can we infer that <code class="codehilite">List[NonEmpty] &lt;: List[IntSet]</code>?
Intuitively, this makes sense: a list of non-empty sets is a special case of a list of arbitrary sets.
We call types for which this relationship holds <strong>covariant</strong> because their subtyping relationship varies with the type parameter. Thus <code class="codehilite">Lists</code> in scala are <strong>covariant</strong>.</p>
<p>Does covariance make sense for all types, not just for List? No. For instance, in Scala, <strong>arrays are not covariant</strong>.</p>
<div class="admonition question">
<p class="admonition-title">When does it make sense to subtype one type with another?</p>
<blockquote>
<p>It is safe to assume that a type <code class="codehilite">T</code> is a subtype of a type <code class="codehilite">U</code> (<code class="codehilite">T &lt;: U</code>) if you can substitute a
value of type <code class="codehilite">T</code> wherever a value of type U is required. This is called the <em>Liskov Substitution Principle</em>.</p>
</blockquote>
<p><a href="https://stackoverflow.com/a/584732/1977778">Liskov Substitution Principle</a></p>
<p><img alt="lsp" src="../assets/img/lsp.jpg" />
<br>
<a href="https://twitter.com/javi/status/1004821965868109824">https://twitter.com/javi/status/1004821965868109824</a></p>
</div>
<p>Say <code class="codehilite">C[T]</code> is a parameterized type, and A, B are types such that:</p>
<ul>
<li>Given <code class="codehilite">A &lt;: B</code> (A is a subtype of B)</li>
<li>If <code class="codehilite">C[A] &lt;: C[B]</code>, <code class="codehilite">C</code> is <strong>covariant</strong></li>
<li>If <code class="codehilite">C[A] &gt;: C[B]</code>, <code class="codehilite">C</code> is <strong>contravariant</strong></li>
<li>Neither <code class="codehilite">C[A]</code> or <code class="codehilite">C[B]</code> is a subtype of the other, then C is <strong>invariant</strong> (or <em>"nonvariant"</em>). </li>
</ul>
<p>Scala lets you declare the variance of a type by annotating the type parameter:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// C is covariant</span>
<span class="k">class</span> <span class="nc">C</span><span class="o">[</span><span class="kt">-A</span><span class="o">]</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// C is contravariant</span>
<span class="k">class</span> <span class="nc">C</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>  <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// C is invariant</span>
</pre></div>
</td></tr></table>

<p>So, given that <code class="codehilite">Any</code> &gt; <code class="codehilite">AnyRef</code> &gt; <code class="codehilite">IntSet</code> &gt; <code class="codehilite">Empty</code> and <code class="codehilite">NonEmpty</code>, if 
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">type</span> <span class="kt">A</span> <span class="o">=</span> <span class="nc">IntSet</span> <span class="k">=&gt;</span> <span class="nc">NonEmpty</span>
<span class="k">type</span> <span class="kt">B</span> <span class="o">=</span> <span class="nc">NonEmpty</span> <span class="k">=&gt;</span> <span class="nc">IntSet</span>
</pre></div>
</td></tr></table>
According to the <a href="https://stackoverflow.com/a/584732/1977778">Liskov Principle</a> =&gt; <code class="codehilite">A &lt;: B</code>, since B can return an Empty or NonEmpty, but A can return only NonEmpty.</p>
<p>For a function, if <code class="codehilite">A2 &lt;: A1</code> and <code class="codehilite">B1 &lt;: B2</code>, then <code class="codehilite">A1 =&gt; B1 &lt;: A2 =&gt; B2</code>. The consequence is that functions must be <strong>contravariant in their argument types and covariant in their result types</strong>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/** The Scala Function1 S =&gt; T */</span>
<span class="k">trait</span> <span class="nc">Function1</span><span class="o">[</span><span class="kt">-S</span>, <span class="kt">+T</span><span class="o">]</span> <span class="o">{</span>
    <span class="c1">// S is contravariant, while T is covariant</span>
    <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">S</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>This example shows that functions are <em>contravariant</em> in argument types and <em>covariant</em> in return types.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">package</span> <span class="nn">io.github.sentenza.cars</span>

<span class="k">class</span> <span class="nc">Car</span> <span class="o">{}</span>
<span class="k">class</span> <span class="nc">SportsCar</span> <span class="k">extends</span> <span class="nc">Car</span> <span class="o">{}</span>
<span class="k">class</span> <span class="nc">Ferrari</span> <span class="k">extends</span> <span class="nc">SportsCar</span> <span class="o">{}</span>

<span class="k">object</span> <span class="nc">morecovariance</span> <span class="k">extends</span> <span class="nc">App</span> <span class="o">{</span>

    <span class="c1">// Test 1: Works as expected</span>

    <span class="k">def</span> <span class="n">test1</span><span class="o">(</span> <span class="n">arg</span><span class="k">:</span> <span class="kt">SportsCar</span> <span class="o">=&gt;</span> <span class="nc">SportsCar</span> <span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nc">SportsCar</span>
    <span class="o">}</span>

    <span class="k">def</span> <span class="n">foo1</span><span class="o">(</span><span class="n">arg</span><span class="k">:</span> <span class="kt">Car</span><span class="o">)</span><span class="k">:</span> <span class="kt">Ferrari</span> <span class="o">=</span> <span class="o">{</span> <span class="k">new</span> <span class="nc">Ferrari</span> <span class="o">}</span>
    <span class="k">def</span> <span class="n">foo2</span><span class="o">(</span><span class="n">arg</span><span class="k">:</span> <span class="kt">SportsCar</span><span class="o">)</span><span class="k">:</span> <span class="kt">Car</span> <span class="o">=</span> <span class="o">{</span> <span class="k">new</span> <span class="nc">Ferrari</span> <span class="o">}</span>
    <span class="k">def</span> <span class="n">foo3</span><span class="o">(</span><span class="n">arg</span><span class="k">:</span> <span class="kt">Ferrari</span><span class="o">)</span><span class="k">:</span> <span class="kt">Ferrari</span> <span class="o">=</span> <span class="o">{</span> <span class="k">new</span> <span class="nc">Ferrari</span> <span class="o">}</span>

    <span class="n">test1</span><span class="o">(</span><span class="n">foo1</span><span class="o">)</span> <span class="c1">// compiles</span>
    <span class="n">test1</span><span class="o">(</span><span class="n">foo2</span><span class="o">)</span> <span class="c1">// Fails due to wrong return type. </span>
    <span class="n">test1</span><span class="o">(</span><span class="n">foo3</span><span class="o">)</span> <span class="c1">// Fails due to wrong parameter type</span>

<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>Find out more about variance in <a href="http://blog.kamkor.me/Covariance-And-Contravariance-In-Scala/">Covariance And Contravariance in Scala</a></p>
<p><strong>Type constructor and Variance</strong></p>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>To be added</p>
</div>
<p>pag. 392 of the White Scala Manual</p>
<h2 id="objects-and-code-organization">Objects and Code organization</h2>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p><em>Scala has no globally visible methods: every method must be contained in an object or a class. However, using methods named <code class="codehilite">apply</code> inside global objects, you can support usage patterns that look like invocations of global methods.</em></p>
<p>From <a href="https://www.artima.com/shop/programming_in_scala"><em>Programming in Scala - Second edition (by M. Odersky, L. Spoon, B. Venners)</em></a></p>
</div>
<p>As you can read above, I introduced <strong>Objects in terms of the functions they contain</strong>. It's very important to stress on this aspect, because Classes and Objects should be seen under a different light using Scala, especially if you come from an imperative OOP language, like Java or C++. They are just a way to organise your functions and at some point, using traits, objects (companion objects) and case classes (data constructors) you will eventually be able to build up your coding architecture based on types and composition of functions.</p>
<h3 id="general-object-hierarchy">General object hierarchy</h3>
<p><img alt="scala-hierarchy" src="../assets/img/scala-hierarchy.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All members of packages <code class="codehilite">scala</code> and <code class="codehilite">java.lang</code> as well as all members of the object <code class="codehilite">scala.Predef</code> are automatically imported.</p>
</div>
<ul>
<li><code class="codehilite">scala.Nothing</code> is a trait that is the bottom subtype of every subtype of <code class="codehilite">scala.Any</code><ul>
<li><code class="codehilite">scala.Any</code> base type of all types. It has methods <code class="codehilite">hashCode</code> and <code class="codehilite">toString</code> that can be overridden</li>
</ul>
</li>
<li><code class="codehilite">scala.AnyVal</code> is the base type of all primitive types: <code class="codehilite">Double</code>, <code class="codehilite">Float</code>, etc.</li>
<li><code class="codehilite">scala.AnyRef</code> base type of all reference types. (alias of <code class="codehilite">java.lang.Object</code>, supertype of <code class="codehilite">java.lang.String</code>, <code class="codehilite">scala.List</code>, any user-defined class)</li>
<li><code class="codehilite">scala.Null</code> is a subtype of any <code class="codehilite">scala.AnyRef</code>, and <code class="codehilite">scala.Nothing</code> is a subtype of any other type without any instance.<ul>
<li><code class="codehilite">Null</code> is a trait and is the bottom type similiar to <code class="codehilite">Nothing</code> but only for <code class="codehilite">AnyRef</code> not <code class="codehilite">AnyVal</code></li>
<li><code class="codehilite">null</code> is the only instance of type <code class="codehilite">Null</code></li>
</ul>
</li>
<li><code class="codehilite">Nil</code> is an empty list that is defined as a <code class="codehilite">List[Nothing]</code></li>
<li><code class="codehilite">None</code> is an empty option that is defined as a <code class="codehilite">Option[Nothing]</code></li>
<li><code class="codehilite">Unit</code> is a subtype of <code class="codehilite">AnyVal</code>, it's only value is <code class="codehilite">()</code> and it is not represented by any object in the underlying runtime system. A method with return type <code class="codehilite">Unit</code> is analogous to a Java method which is declared <code class="codehilite">void</code></li>
</ul>
<h3 id="factory-object">Factory Object</h3>
<p>The following example has been taken from <a href="https://www.artima.com/shop/programming_in_scala">Programming in Scala</a>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Element</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">contents</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
    <span class="k">def</span> <span class="n">height</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">contents</span><span class="o">.</span><span class="n">length</span>
    <span class="k">def</span> <span class="n">width</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">height</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">contents</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="n">length</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">ArrayElements</span><span class="o">(</span><span class="k">val</span> <span class="n">contents</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">extends</span> <span class="nc">Element</span> 

<span class="c1">// Invoking superclass constructor while extending the class itself</span>
<span class="k">class</span> <span class="nc">LineElement</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">ArrayElement</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="n">s</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">override</span> <span class="k">def</span> <span class="n">width</span> <span class="k">=</span> <span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="c1">// Int is inferred</span>
    <span class="k">override</span> <span class="k">def</span> <span class="n">width</span> <span class="k">=</span> <span class="mi">1</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">UniformElement</span><span class="o">(</span>
    <span class="n">ch</span><span class="k">:</span> <span class="kt">Char</span><span class="o">,</span>
    <span class="k">override</span> <span class="k">val</span> <span class="n">width</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span>
    <span class="k">override</span> <span class="k">val</span> <span class="n">heigth</span><span class="k">:</span> <span class="kt">Int</span>
<span class="o">)</span> <span class="k">extends</span> <span class="nc">Element</span> <span class="o">{</span>
    <span class="k">private</span> <span class="k">val</span> <span class="n">line</span> <span class="k">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">toString</span> <span class="o">*</span> <span class="n">width</span>
    <span class="k">def</span> <span class="n">contents</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">.</span><span class="n">fill</span><span class="o">(</span><span class="n">height</span><span class="o">)(</span><span class="n">line</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>Now, what we can do is defining a <em>Factory Object</em> which contains methods that construct other objects, without exposing each class implementation. Basically, we can hide each class inside a Singleton Object, which will represent just a tag for the overloaded methods that will give us the ability to instantiate each subclass dinamically, and using polymorphism at the same time.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note that <strong>OOP is not a paradigm, but it's just a way to define our code structure in a logic manner</strong> that is similar to playing with LEGOs. OOP can be seen like an <strong>orthogonal dimension</strong> compared to functional, declarative or imperative paradigms.</p>
</div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// We start defining a Singleton Object</span>
<span class="k">object</span> <span class="nc">Element</span> <span class="o">{</span>
    <span class="c1">// we can now hide classes as private fields of this object</span>
    <span class="k">private</span> <span class="k">class</span> <span class="nc">ArrayElements</span><span class="o">(</span>
        <span class="k">val</span> <span class="n">contents</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
    <span class="o">)</span> <span class="k">extends</span> <span class="nc">Element</span>

    <span class="k">private</span> <span class="k">class</span> <span class="nc">LineElement</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Element</span> <span class="o">{</span>
        <span class="k">val</span> <span class="n">contents</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="n">s</span><span class="o">)</span>
        <span class="k">override</span> <span class="k">def</span> <span class="n">width</span> <span class="k">=</span> <span class="n">s</span><span class="o">.</span><span class="n">length</span>
        <span class="k">override</span> <span class="k">def</span> <span class="n">width</span> <span class="k">=</span> <span class="mi">1</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="k">class</span> <span class="nc">UniformElement</span><span class="o">(</span>
        <span class="n">ch</span><span class="k">:</span> <span class="kt">Char</span><span class="o">,</span>
        <span class="k">override</span> <span class="k">val</span> <span class="n">width</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span>
        <span class="k">override</span> <span class="k">val</span> <span class="n">heigth</span><span class="k">:</span> <span class="kt">Int</span>
    <span class="o">)</span> <span class="k">extends</span> <span class="nc">Element</span> <span class="o">{</span>
        <span class="k">private</span> <span class="k">val</span> <span class="n">line</span> <span class="k">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">toString</span> <span class="o">*</span> <span class="n">width</span>
        <span class="k">def</span> <span class="n">contents</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">.</span><span class="n">fill</span><span class="o">(</span><span class="n">height</span><span class="o">)(</span><span class="n">line</span><span class="o">)</span>
    <span class="o">}</span> 

    <span class="c1">// FACTORY</span>
    <span class="k">def</span> <span class="n">elem</span><span class="o">(</span><span class="n">contents</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Element</span> <span class="o">=</span>
        <span class="k">new</span> <span class="nc">ArrayElement</span><span class="o">(</span><span class="n">contents</span><span class="o">)</span>

    <span class="k">def</span> <span class="n">elem</span><span class="o">(</span><span class="n">chr</span><span class="k">:</span> <span class="kt">Char</span><span class="o">,</span> <span class="n">width</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">heigth</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Element</span> <span class="o">=</span> 
        <span class="k">new</span> <span class="nc">UniformElement</span><span class="o">(</span><span class="n">chr</span><span class="o">,</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">)</span>

    <span class="k">def</span> <span class="n">elem</span><span class="o">(</span><span class="n">line</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Elem</span> <span class="o">=</span>
        <span class="k">new</span> <span class="nc">LineElement</span><span class="o">(</span><span class="n">line</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>Objects creation are centralized and the details now are hidden. </p>
<div class="admonition tip">
<p class="admonition-title">Open/Closed Principle</p>
<p>This will eventually give an easy way to understand how to use these elements, and at the same time this small change will give the developer the <strong>Open/Closed Principle</strong> for free because less detail is exposed.</p>
<blockquote>
<p><em>“Software entities … should be open for extension, but closed for modification.”</em></p>
</blockquote>
<p>This provides more opportunities to <strong>change the implementation of the library without breaking client code</strong>. At the same time a class will have a single responsibility, and only one potential change in the software’s specification should be able to affect the specification of the class (<strong>Single Responsibility Principle</strong>). So, writing <code class="codehilite">SOLID</code> code pays off at the end. </p>
</div>
<h3 id="factory-method">Factory method</h3>
<p>In Java you can create a private constructor by making it <code class="codehilite">private</code>. In Scala one can achieve the same behaviour prepending the <code class="codehilite">private</code> modifier to the default constructor. </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Point</span> <span class="k">private</span><span class="o">(</span><span class="n">coordX</span><span class="k">:</span> <span class="kt">Float</span><span class="o">,</span> <span class="n">coordY</span><span class="k">:</span> <span class="kt">Float</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="n">coordX</span>
    <span class="k">val</span> <span class="n">y</span> <span class="k">=</span> <span class="n">coordY</span>

    <span class="cm">/** Public auxiliary constructor</span>
<span class="cm">      * Setting the point at the origin of the Cartesian axes</span>
<span class="cm">      * calling the default private constructor using the </span>
<span class="cm">      */</span> 
    <span class="k">def</span> <span class="k">this</span><span class="o">()</span> <span class="k">=</span> <span class="k">this</span><span class="o">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">)</span>

    <span class="k">def</span> <span class="n">getPoint</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>You cannot instantiate a new point using the default constructor:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">val</span> <span class="n">errorPoint</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="o">(</span><span class="mf">45.9</span><span class="o">,</span> <span class="mf">21.08</span><span class="o">)</span> <span class="c1">// ERROR</span>
<span class="k">val</span> <span class="n">correctPoint</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="o">()</span> <span class="c1">// (0.0, 0.0)</span>
</pre></div>
</td></tr></table>

<p>A possible solution to define a new <code class="codehilite">Point</code> is given by the usage of a <em>companion object</em> and a <strong>factory method</strong> that will give us a convenient way to define a new object, without actually call the <code class="codehilite">new</code> operator. To do so one can add the <code class="codehilite">apply()</code> method to the newly created object, which will have the same acess rights to the <code class="codehilite">Point</code> class if placed in the same file.</p>
<p>Therefore, the <code class="codehilite">apply()</code> method will be able to use the private construction of the <code class="codehilite">Point</code> class and then it will become a <strong>factory method</strong>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Point</span><span class="o">[</span><span class="kt">T</span> <span class="k">&lt;:</span> <span class="kt">Double</span><span class="o">]</span> <span class="nc">private</span><span class="o">(</span><span class="n">coordX</span><span class="k">:</span> <span class="kt">T</span><span class="o">,</span> <span class="n">coordY</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="k">object</span> <span class="nc">Point</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">apply</span><span class="o">[</span><span class="kt">T</span> <span class="k">&lt;:</span> <span class="kt">Double</span><span class="o">](</span><span class="n">x</span><span class="k">:</span> <span class="kt">T</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h2 id="collections">Collections</h2>
<p>Scala defines several collection classes:</p>
<h4 id="base-classes">Base Classes</h4>
<ul>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.Iterable"><code class="codehilite">Iterable</code></a> (collections you can iterate on)</li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.Seq"><code class="codehilite">Seq</code></a> (ordered sequences)</li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.Set"><code class="codehilite">Set</code></a></li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.Map"><code class="codehilite">Map</code></a> (lookup data structure)</li>
</ul>
<h4 id="immutable-collections">Immutable Collections</h4>
<ul>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List"><code class="codehilite">List</code></a> (linked list, provides fast sequential access)</li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream"><code class="codehilite">Stream</code></a> (same as List, except that the tail is evaluated only on demand)</li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Vector"><code class="codehilite">Vector</code></a> (array-like type, implemented as tree of blocks, provides fast random access)</li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Range"><code class="codehilite">Range</code></a> (ordered sequence of integers with equal spacing)</li>
<li><a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html"><code class="codehilite">String</code></a> (Java type, implicitly converted to a character sequence, so you can treat every string like a <code class="codehilite">Seq[Char]</code>)</li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Map"><code class="codehilite">Map</code></a> (collection that maps keys to values)</li>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Set"><code class="codehilite">Set</code></a> (collection without duplicate elements)</li>
</ul>
<h4 id="mutable-collections">Mutable Collections</h4>
<ul>
<li><a href="http://www.scala-lang.org/api/current/index.html#scala.Array"><code class="codehilite">Array</code></a> (Scala arrays are native JVM arrays at runtime, therefore they are very performant)</li>
<li>Scala also has mutable maps and sets; <strong>these should only be used if there are performance issues with immutable types</strong></li>
</ul>
<h4 id="collections-snippet">Collections snippet</h4>
<div class="admonition snippet">
<p class="admonition-title">Snippet</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">val</span> <span class="n">r</span><span class="k">:</span> <span class="kt">Range</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">until</span> <span class="mi">5</span> <span class="c1">// 1, 2, 3, 4</span>
<span class="k">val</span> <span class="n">s</span><span class="k">:</span> <span class="kt">Range</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">5</span>    <span class="c1">// 1, 2, 3, 4, 5</span>
<span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span> <span class="n">by</span> <span class="mi">3</span>  <span class="c1">// 1, 4, 7, 10</span>
<span class="mi">6</span> <span class="n">to</span> <span class="mi">1</span> <span class="n">by</span> <span class="o">-</span><span class="mi">2</span>  <span class="c1">// 6, 4, 2</span>

<span class="c1">// Operations on sequences</span>
<span class="k">val</span> <span class="n">xs</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(...)</span>
<span class="n">xs</span><span class="o">.</span><span class="n">length</span>   <span class="c1">// number of elements, complexity O(n)</span>
<span class="n">xs</span><span class="o">.</span><span class="n">last</span>     <span class="c1">// last element (exception if xs is empty), complexity O(n)</span>
<span class="n">xs</span><span class="o">.</span><span class="n">init</span>     <span class="c1">// all elements of xs but the last (exception if xs is empty), complexity O(n)</span>
<span class="n">xs</span> <span class="n">take</span> <span class="n">n</span>   <span class="c1">// first n elements of xs</span>
<span class="n">xs</span> <span class="n">drop</span> <span class="n">n</span>   <span class="c1">// the rest of the collection after taking n elements</span>
<span class="n">xs</span><span class="o">(</span><span class="n">n</span><span class="o">)</span>       <span class="c1">// the nth element of xs, complexity O(n)</span>
<span class="n">xs</span> <span class="o">++</span> <span class="n">ys</span>    <span class="c1">// concatenation, complexity O(n)</span>
<span class="n">xs</span><span class="o">.</span><span class="n">reverse</span>  <span class="c1">// reverse the order, complexity O(n)</span>
<span class="n">xs</span> <span class="n">updated</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>  <span class="c1">// same list than xs, except at index n where it contains x, complexity O(n)</span>
<span class="n">xs</span> <span class="n">indexOf</span> <span class="n">x</span>      <span class="c1">// the index of the first element equal to x (-1 otherwise)</span>
<span class="n">xs</span> <span class="n">contains</span> <span class="n">x</span>     <span class="c1">// same as xs indexOf x &gt;= 0</span>
<span class="n">xs</span> <span class="n">filter</span> <span class="n">p</span>       <span class="c1">// returns a list of the elements that satisfy the predicate p</span>
<span class="n">xs</span> <span class="n">filterNot</span> <span class="n">p</span>    <span class="c1">// filter with negated p </span>
<span class="n">xs</span> <span class="n">partition</span> <span class="n">p</span>    <span class="c1">// same as (xs filter p, xs filterNot p)</span>
<span class="n">xs</span> <span class="n">takeWhile</span> <span class="n">p</span>    <span class="c1">// the longest prefix consisting of elements that satisfy p</span>
<span class="n">xs</span> <span class="n">dropWhile</span> <span class="n">p</span>    <span class="c1">// the remainder of the list after any leading element satisfying p have been removed</span>
<span class="n">xs</span> <span class="n">span</span> <span class="n">p</span>         <span class="c1">// same as (xs takeWhile p, xs dropWhile p)</span>

<span class="nc">List</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="o">...,</span> <span class="n">xn</span><span class="o">)</span> <span class="n">reduceLeft</span> <span class="n">op</span>    <span class="c1">// (...(x1 op x2) op x3) op ...) op xn</span>
<span class="nc">List</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="o">...,</span> <span class="n">xn</span><span class="o">).</span><span class="n">foldLeft</span><span class="o">(</span><span class="n">z</span><span class="o">)(</span><span class="n">op</span><span class="o">)</span>  <span class="c1">// (...( z op x1) op x2) op ...) op xn</span>
<span class="nc">List</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="o">...,</span> <span class="n">xn</span><span class="o">)</span> <span class="n">reduceRight</span> <span class="n">op</span>   <span class="c1">// x1 op (... (x{n-1} op xn) ...)</span>
<span class="nc">List</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="o">...,</span> <span class="n">xn</span><span class="o">).</span><span class="n">foldRight</span><span class="o">(</span><span class="n">z</span><span class="o">)(</span><span class="n">op</span><span class="o">)</span> <span class="c1">// x1 op (... (    xn op  z) ...)</span>

<span class="n">xs</span> <span class="n">exists</span> <span class="n">p</span>    <span class="c1">// true if there is at least one element for which predicate p is true</span>
<span class="n">xs</span> <span class="n">forall</span> <span class="n">p</span>    <span class="c1">// true if p(x) is true for all elements</span>
<span class="n">xs</span> <span class="n">zip</span> <span class="n">ys</span>      <span class="c1">// returns a list of pairs which groups elements with same index together</span>
<span class="n">xs</span> <span class="n">unzip</span>       <span class="c1">// opposite of zip: returns a pair of two lists</span>
<span class="n">xs</span><span class="o">.</span><span class="n">flatMap</span> <span class="n">f</span>   <span class="c1">// applies the function to all elements and concatenates the result</span>
<span class="n">xs</span><span class="o">.</span><span class="n">sum</span>         <span class="c1">// sum of elements of the numeric collection</span>
<span class="n">xs</span><span class="o">.</span><span class="n">product</span>     <span class="c1">// product of elements of the numeric collection</span>
<span class="n">xs</span><span class="o">.</span><span class="n">max</span>         <span class="c1">// maximum of collection</span>
<span class="n">xs</span><span class="o">.</span><span class="n">min</span>         <span class="c1">// minimum of collection</span>
<span class="n">xs</span><span class="o">.</span><span class="n">flatten</span>     <span class="c1">// flattens a collection of collection into a single-level collection</span>
<span class="n">xs</span> <span class="n">groupBy</span> <span class="n">f</span>   <span class="c1">// returns a map which points to a list of elements</span>
<span class="n">xs</span> <span class="n">distinct</span>    <span class="c1">// sequence of distinct entries (removes duplicates)</span>

<span class="n">x</span> <span class="o">+:</span> <span class="n">xs</span>  <span class="c1">// creates a new collection with leading element x</span>
<span class="n">xs</span> <span class="o">:+</span> <span class="n">x</span>  <span class="c1">// creates a new collection with trailing element x</span>

<span class="c1">// Operations on maps</span>
<span class="k">val</span> <span class="n">myMap</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="s">&quot;I&quot;</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">,</span> <span class="s">&quot;V&quot;</span> <span class="o">-&gt;</span> <span class="mi">5</span><span class="o">,</span> <span class="s">&quot;X&quot;</span> <span class="o">-&gt;</span> <span class="mi">10</span><span class="o">)</span>  <span class="c1">// create a map</span>
<span class="n">myMap</span><span class="o">(</span><span class="s">&quot;I&quot;</span><span class="o">)</span>      <span class="c1">// =&gt; 1  </span>
<span class="n">myMap</span><span class="o">(</span><span class="s">&quot;A&quot;</span><span class="o">)</span>      <span class="c1">// =&gt; java.util.NoSuchElementException  </span>
<span class="n">myMap</span> <span class="n">get</span> <span class="s">&quot;A&quot;</span>   <span class="c1">// =&gt; None </span>
<span class="n">myMap</span> <span class="n">get</span> <span class="s">&quot;I&quot;</span>   <span class="c1">// =&gt; Some(1)</span>
<span class="n">myMap</span><span class="o">.</span><span class="n">updated</span><span class="o">(</span><span class="s">&quot;V&quot;</span><span class="o">,</span> <span class="mi">15</span><span class="o">)</span>  <span class="c1">// returns a new map where &quot;V&quot; maps to 15 (entry is updated)</span>
                        <span class="c1">// if the key (&quot;V&quot; here) does not exist, a new entry is added</span>

<span class="c1">// Operations on Streams</span>
<span class="k">val</span> <span class="n">xs</span> <span class="k">=</span> <span class="nc">Stream</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="k">val</span> <span class="n">xs</span> <span class="k">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="nc">Stream</span><span class="o">.</span><span class="n">cons</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="nc">Stream</span><span class="o">.</span><span class="n">empty</span><span class="o">)))</span> <span class="c1">// same as above</span>
<span class="o">(</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">1000</span><span class="o">).</span><span class="n">toStream</span> <span class="c1">// =&gt; Stream(1, ?)</span>
<span class="n">x</span> <span class="o">#::</span> <span class="n">xs</span> <span class="c1">// Same as Stream.cons(x, xs)</span>
            <span class="c1">// In the Stream&#39;s cons operator, the second parameter (the tail)</span>
            <span class="c1">// is defined as a &quot;call by name&quot; parameter.</span>
            <span class="c1">// Note that x::xs always produces a List</span>
</pre></div>
</td></tr></table>

</div>
<h4 id="pairs-similar-for-larger-tuples">Pairs (similar for larger Tuples)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">val</span> <span class="n">pair</span> <span class="k">=</span> <span class="o">(</span><span class="s">&quot;answer&quot;</span><span class="o">,</span> <span class="mi">42</span><span class="o">)</span>   <span class="c1">// type: (String, Int)</span>
    <span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="o">(</span><span class="s">&quot;x&quot;</span> <span class="o">-&gt;</span> <span class="mi">90</span><span class="o">)</span>         <span class="c1">// type: (String, Int)</span>
    <span class="k">val</span> <span class="n">y</span> <span class="k">=</span> <span class="o">(</span><span class="s">&quot;y&quot;</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">5</span><span class="o">)</span>         <span class="c1">// type: (String, Int)</span>
    <span class="k">val</span> <span class="n">z</span> <span class="k">=</span> <span class="o">(</span><span class="s">&quot;z&quot;</span> <span class="o">-&gt;</span> <span class="mi">0</span><span class="o">)</span>          <span class="c1">// type: (String, Int)</span>
    <span class="k">val</span> <span class="o">(</span><span class="n">label</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span> <span class="k">=</span> <span class="n">pair</span>   <span class="c1">// label = &quot;answer&quot;, value = 42  </span>
    <span class="n">pair</span><span class="o">.</span><span class="n">_1</span> <span class="c1">// &quot;answer&quot;  </span>
    <span class="n">pair</span><span class="o">.</span><span class="n">_2</span> <span class="c1">// 42  </span>
</pre></div>
</td></tr></table>

<h4 id="ordering">Ordering</h4>
<p>There is already a class in the standard library that represents orderings: <code class="codehilite">scala.math.Ordering[T]</code> which contains
comparison functions such as <code class="codehilite">lt()</code> and <code class="codehilite">gt()</code> for standard types. Types with a single natural ordering should inherit from 
the trait <code class="codehilite">scala.math.Ordered[T]</code>.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">import</span> <span class="nn">math.Ordering</span>  

<span class="k">def</span> <span class="n">msort</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">xs</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">T</span><span class="o">])(</span><span class="k">implicit</span> <span class="n">ord</span><span class="k">:</span> <span class="kt">Ordering</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="o">...}</span>  
<span class="n">msort</span><span class="o">(</span><span class="n">fruits</span><span class="o">)(</span><span class="nc">Ordering</span><span class="o">.</span><span class="nc">String</span><span class="o">)</span>  
<span class="n">msort</span><span class="o">(</span><span class="n">fruits</span><span class="o">)</span>   <span class="c1">// the compiler figures out the right ordering  </span>
</pre></div>
</td></tr></table></p>
<h3 id="map-and-flatmap">map() and flatMap()</h3>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>To be added</p>
</div>
<h2 id="category-theory">Category Theory</h2>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>To be added</p>
</div>
<h3 id="algrebraic-data-type">Algrebraic Data Type</h3>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>To be added</p>
</div>
<h3 id="typeclass">Typeclass</h3>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p><em>[...] Type class is a class (group) of types, which satisfy some contract defined in a trait with addition that such functionality (trait and implementation) can be added without any changes to the original code. One could say that the same could be achieved by extending a simple trait, but with type classes it is not necessary to predict such a need beforehand.</em></p>
<p><em>There is no special syntax in Scala to express a type class, but the same functionality can be achieved using constructs that already exist in the language. <strong>That’s what makes it a little difficult for newcomers to spot a type class in code. A typical implementation of a type class uses some syntactic sugar as well, which also doesn’t make it clear right away what we are dealing with</strong>.</em></p>
<p><a href="https://blog.scalac.io/2017/04/19/typeclasses-in-scala.html">https://blog.scalac.io/2017/04/19/typeclasses-in-scala.html</a></p>
</div>
<h3 id="monoid">Monoid</h3>
<p>The Monoid is essentially the first purely <em>algebraic</em> data structures. The term <em>monoid</em> is taken from the <strong>Category Theory</strong>, and it means a category with one object. This kind of algebraic data structures are the corner stone of the technique that gives us the ability to write <strong>polymorphic functions</strong>. A Monoid is made of:</p>
<ul>
<li>A type <code class="codehilite">T</code></li>
<li>A binary operation, which is associative, that takes two values of type <code class="codehilite">T</code> and combines them into one</li>
<li>A value <code class="codehilite"><span class="n">zero</span><span class="o">:</span> <span class="n">T</span></code> which is an <em>identity</em> for the associative operation</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/**</span>
<span class="cm">  * It is defined by some type A, an associative binary operation that takes </span>
<span class="cm">  */</span>
<span class="k">trait</span> <span class="nc">Monoid</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>
  <span class="c1">// associativity</span>
  <span class="c1">// op(op(x, y), z) == op(x, op(y, z))</span>
  <span class="k">def</span> <span class="n">op</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">T</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span>

  <span class="c1">// identity</span>
  <span class="c1">// op(x, zero) == op(zero, x) == x</span>
  <span class="k">def</span> <span class="n">zero</span><span class="k">:</span> <span class="kt">T</span>
<span class="o">}</span>

<span class="c1">// example</span>
<span class="k">val</span> <span class="n">stringMonoid</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Monoid</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">op</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">zero</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<h3 id="fold-foldright-and-foldleft">fold: foldRight() and foldLeft()</h3>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>To be added</p>
</div>
                
                  
                
              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "http://torre.me.uk/docs/scala/";
      this.page.identifier =
        "/scala/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//alfredotorre.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </span>
            </div>
          </a>
        
        
          <a href="../links/" title="Links" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Links
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/sentenza" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.5e60981f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>